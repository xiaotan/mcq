{extend name="public:layout" /}

{block name="style"}
    <link rel="stylesheet" href="__MODULE_CSS__/do_order.css">
    <link rel="stylesheet" href="__MODULE_CSS__/remodal.css">
    <link rel="stylesheet" href="__MODULE_CSS__/remodal-default-theme.css">
{/block}

{block name="main"}
    <div class="page-group">
        <div class="page">
            <header class="navbar">
                <div class="nav-wrap nav-wrap-left">
                    <a class="react" rel="nofollow" href="">
                        <span class="nav-btn">
                            <i class="icon icon-home"></i>
                        </span>
                    </a>
                </div>
                <div class="nav-wrap-title">服务</div>
                <div class="nav-wrap nav-wrap-right">
                    <a class="react" rel="nofollow" href="">
                        <span class="nav-btn">
                            <i class="icon icon-home"></i>
                        </span>
                    </a>
                    <a class="react" rel="nofollow" href="">
                        <span class="nav-btn">
                            <i class="icon icon-home"></i>
                        </span>
                    </a>
                </div>
            </header>
            <div class="header-box"></div>

            <div class="content banner">
                <div class="swiper-container" data-autoplay="5000">
                    <div class="swiper-wrapper">
                        {volist name="slider" id="vo"}
                            <div class="swiper-slide"><img width="100%" src="{:get_file_path($vo)}" alt=""></div>
                        {/volist}
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>

            <div id="service">
                <div class="service-box">
                    <div class="base">
                        <div class="base-top">
                            <p class="name">{$business.name}</p>
                            <span class="stars">
                                {for start="0" end="intval($business['score'])"}
                                    <i class="my-icon icon-star"></i>
                                {/for}
                                {if $business['score']>intval($business['score'])}
                                    <i class="my-icon icon-star icon-star-gray">
                                        <i class="my-icon icon-star icon-star-half"></i>
                                    </i>
                                {/if}
                                <em class="star-text">{$business.score}</em>
                            </span>
                            <div class="line"></div>
                            <p class="addr-box pr">
                                <i class="icon icon-home addr-icon"></i>
                                <span class="addr" lng="{$business.lng}" lat="{$business.lat}">{$business.address}</span>
                                <span class="tel"><a href="tel:{$business.tel}"><i class="icon icon-home"></i></a></span>
                            </p>
                            <div class="clearfix"></div>
                        </div>
                        <div class="project order-box">
                            <div class="order-box-title">预约项目</div>
                            <div class="project-list">
                                <ul>
                                    <template v-for="item in service">
                                        <li :class="item.id == current ? 'on' : ''" @click="changeProject(item.id)">
                                            <img :src="item.icon" alt="">
                                        </li>
                                    </template>
                                </ul>
                            </div>
                        </div>
                        <div class="pet order-box">
                            <div class="order-box-title">宠物信息</div>
                            <div class="row pet-item">
                                <div class="col-20 pet-item-left class-title">
                                    <span>宠物</span>
                                </div>
                                <div class="col-80 class-list">
                                    <ul>
                                        <template v-for="item in service[current].pets">
                                            <li :class="item.id == pet_current ? 'on' : ''" @click="changePet(item.id)">
                                                <img :src="item.icon" alt="">
                                            </li>
                                        </template>
                                    </ul>
                                </div>
                            </div>
                            <div class="row pet-item">
                                <div class="col-20 pet-item-left">
                                    <span>品种</span>
                                </div>
                                <div class="col-80 breed-right">
                                    <input type="text">
                                    <button @click="choosebreed">选择</button>
                                </div>
                            </div>
                            <div class="row pet-item">
                                <div class="col-20 pet-item-left">
                                    <span>年龄</span>
                                </div>
                                <div class="col-80 breed-right">
                                    <ul>
                                        <li class="on">小于3个月</li>
                                        <li>3至6个月</li>
                                        <li>大于6个月</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="time order-box">
                            <div class="order-box-title">预约时间</div>
                            <div class="date-list">
                                <ul>
                                    <li class="on">今天</li>
                                    <li>明天</li>
                                    <li>4/10</li>
                                    <li>4/10</li>
                                    <li>4/10</li>
                                    <li>4/10</li>
                                    <li>4/10</li>
                                </ul>
                            </div>
                            <div class="row time-item">
                                <div class="col-20 time-left">
                                    <span>上午</span>
                                </div>
                                <div class="col-80 time-right">
                                    <ul>
                                        <li class="on">10:00-11:00</li>
                                        <li>10:00-11:00</li>
                                        <li>10:00-11:00</li>
                                        <li>10:00-11:00</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="row time-item">
                                <div class="col-20 time-left">
                                    <span>下午</span>
                                </div>
                                <div class="col-80 time-right">
                                    <ul>
                                        <li class="on">10:00-11:00</li>
                                        <li class="off">10:00-11:00</li>
                                        <li>10:00-11:00</li>
                                        <li>10:00-11:00</li>
                                        <li>10:00-11:00</li>
                                        <li>10:00-11:00</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="row time-item">
                                <div class="col-20 time-left">
                                    <span>晚上</span>
                                </div>
                                <div class="col-80 time-right">
                                    <ul>
                                        <li class="on">10:00-11:00</li>
                                        <li>10:00-11:00</li>
                                        <li>10:00-11:00</li>
                                        <li>10:00-11:00</li>
                                    </ul>
                                </div>
                            </div>
                            <p class="time-tip">温馨提示：您预约服务的时间。棕色为可预约时间。灰色为不可预约时间</p>
                        </div>
                        <div class="doctor order-box">
                            <div class="order-box-title">预约医生</div>
                            <div class="list-block media-list">
                                <ul>
                                    <li>
                                        <label class="label-checkbox item-content">
                                            <input type="radio" name="my-radio">
                                            <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                                            <img class="avatar" src="__MODULE_IMG__/img7.jpg" alt="">
                                            <div class="doctor-box">
                                                <div class="doctor-box-top">
                                                    <div class="doctor-box-title"><span class="name">陈医生</span><span class="position">主治医生</span><span class="auth">已认证</span></div>
                                                    <div class="doctor-num">4.5分</div>
                                                </div>
                                                <div class="doctor-subtitle">预约医生预约医生预约医生预约医生预预约医生预约医生预约医生预约医生预</div>
                                                <div class="doctor-text">主要研究方向：预约医生</div>
                                            </div>
                                        </label>
                                    </li>
                                    <li>
                                        <label class="label-checkbox item-content">
                                            <input type="radio" name="my-radio">
                                            <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                                            <img class="avatar" src="__MODULE_IMG__/img7.jpg" alt="">
                                            <div class="doctor-box">
                                                <div class="doctor-box-top">
                                                    <div class="doctor-box-title"><span class="name">陈医生</span><span class="position">主治医生</span><span class="auth">已认证</span></div>
                                                    <div class="doctor-num">4.5分</div>
                                                </div>
                                                <div class="doctor-subtitle">预约医生预约医生预约医生预约医生预预约医生预约医生预约医生预约医生预</div>
                                                <div class="doctor-text">主要研究方向：预约医生</div>
                                            </div>
                                        </label>
                                    </li>
                                </ul>
                            </div>
                            <p class="more">查看更多 >></p>
                        </div>
                        <div class="addr order-box">
                            <div class="order-box-title">您的地址<span>新增地址 +</span></div>
                            <div class="list-block media-list addr-list">
                                <ul>
                                    <li>
                                        <label class="label-checkbox item-content">
                                            <input type="radio" name="my-radio">
                                            <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                                            <div class="address">预约医生预约医生预约医生预约医生</div>
                                        </label>
                                    </li>
                                    <li>
                                        <label class="label-checkbox item-content">
                                            <input type="radio" name="my-radio">
                                            <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                                            <div class="address">预约医生预约医生预约医生预约医生预预约医生预约医生预约医生预约医生预</div>
                                        </label>
                                    </li>
                                </ul>
                            </div>
                            <div class="order-box-title pay-title">支付方式</div>
                            <div class="list-block media-list pay-list">
                                <ul>
                                    <li>
                                        <label class="label-checkbox item-content">
                                            <input type="radio" name="my-radio">
                                            <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                                            <div class="address"><i class="icon icon-home"></i>微信支付</div>
                                        </label>
                                    </li>
                                    <li>
                                        <label class="label-checkbox item-content">
                                            <input type="radio" name="my-radio">
                                            <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                                            <div class="address"><i class="icon icon-home"></i>支付宝支付</div>
                                        </label>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="other order-box">
                            <div class="list-block">
                                <ul>
                                    <li class="item-content item-link">
                                        <div class="item-inner">
                                            <div class="item-title">商品名称</div>
                                            <div class="item-after">有可用优惠券</div>
                                        </div>
                                    </li>
                                    <li class="item-content item-link">
                                        <div class="item-inner">
                                            <div class="item-title">型号</div>
                                            <div class="item-after">10个虚拟币</div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <p class="remark"><span>备注：</span><input type="text" placeholder="可写下您的需求" /></p>
                            <div class="selected">
                                <ul>
                                    <li>洗澡</li>
                                    <li>洗澡</li>
                                    <li>洗澡</li>
                                    <li>洗澡</li>
                                </ul>
                            </div>
                            <div class="affirm">
                                <span class="price">￥<i>49.9</i></span><span class="coupon">已优惠10元</span><button>立即预约</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="remodal" data-remodal-id="modal" role="dialog" aria-labelledby="modal1Title" aria-describedby="modal1Desc">
                    <button data-remodal-action="close" class="remodal-close" aria-label="Close"></button>
                    <div class="list-block pets">
                        <ul>
                            <template v-for="item in breeds">
                                <li>
                                    <label class="label-checkbox item-content">
                                        <input type="radio" name="breed">
                                        <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                                        <img :src="item.icon" alt="">
                                        <p class="pets-name">{{item.name}}</p>
                                    </label>
                                </li>
                            </template>
                        </ul>
                    </div>
                    <a class="submit">确定</a>
                    <div class="pet-img"><p><img :src="pet_icon" alt=""></p></div>
                </div>

                <div class="remodal" data-remodal-id="modal1" role="dialog" aria-labelledby="modal1Title" aria-describedby="modal1Desc">
                    <button data-remodal-action="close" class="remodal-close" aria-label="Close"></button>
                    <div class="add-addr">
                        <div class="list-block address-box">
                            <p class="addr-title">新增地址</p>
                            <ul>
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label">姓名</div>
                                            <div class="item-input">
                                                <input type="text">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label">性别</div>
                                            <div class="item-input">
                                                <select>
                                                    <option>男</option>
                                                    <option>女</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </li>

                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label">电话</div>
                                            <div class="item-input">
                                                <input type="text">
                                            </div>
                                        </div>
                                    </div>
                                </li>

                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label">地址</div>
                                            <div class="item-input">
                                                <input type="text" value="南宁市" readonly="readonly">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label"></div>
                                            <div class="item-input">
                                                <select>
                                                    <option>青秀区</option>
                                                    <option>江南区</option>
                                                    <option>兴宁区</option>
                                                    <option>邕宁区</option>
                                                    <option>五象新区</option>
                                                    <option>西乡塘区</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label"></div>
                                            <div class="item-input">
                                                <input type="text" placeholder="道路">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label"></div>
                                            <div class="item-input">
                                                <input type="text" placeholder="楼号/门牌号">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <!-- <input type="text" id='city-picker' value="浙江 杭州 拱墅区" /> -->
                        </div>
                        <a class="submit">确定</a>
                    </div>
                </div>

                <!-- <div class="modal-box">
                    <div id="basic-modal-content" class="pet-box">
                        <div class="list-block pets">
                            <ul>
                                <template v-for="item in breeds">
                                    <li>
                                        <label class="label-checkbox item-content">
                                            <input type="radio" name="breed">
                                            <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                                            <img :src="item.icon" alt="">
                                            <p class="pets-name">{{item.name}}</p>
                                        </label>
                                    </li>
                                </template>
                            </ul>
                        </div>
                        <a class="submit">确定</a>
                        <div class="pet-img"><p><img :src="pet_icon" alt=""></p></div>
                    </div>
                </div> -->

                <!-- <div class="modal-box">
                    <div id="basic-modal-content" class="add-addr">
                        <div class="list-block address-box">
                            <p class="addr-title">新增地址</p>
                            <ul>
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label">姓名</div>
                                            <div class="item-input">
                                                <input type="text">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label">性别</div>
                                            <div class="item-input">
                                                <select>
                                                    <option>男</option>
                                                    <option>女</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label">电话</div>
                                            <div class="item-input">
                                                <input type="text">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label">地址</div>
                                            <div class="item-input">
                                                <input type="text" value="南宁市" readonly="readonly">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label"></div>
                                            <div class="item-input">
                                                <select>
                                                    <option>青秀区</option>
                                                    <option>江南区</option>
                                                    <option>兴宁区</option>
                                                    <option>邕宁区</option>
                                                    <option>五象新区</option>
                                                    <option>西乡塘区</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label"></div>
                                            <div class="item-input">
                                                <input type="text" placeholder="道路">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label"></div>
                                            <div class="item-input">
                                                <input type="text" placeholder="楼号/门牌号">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <input type="text" id='city-picker' value="浙江 杭州 拱墅区" />
                        </div>
                        <a class="submit">确定</a>
                    </div>
                </div> -->
            </div>

            <nav class="bar bar-tab">
                <a class="tab-item active" href="#">
                    <span class="icon icon-home"></span>
                    <span class="tab-label">萌宠圈</span>
                </a>
                <a class="tab-item" href="#">
                    <span class="icon icon-me"></span>
                    <span class="tab-label">服务</span>
                    <!-- <span class="badge">2</span> -->
                </a>
                <a class="tab-item" href="#">
                    <span class="icon icon-star"></span>
                    <span class="tab-label">遛狗</span>
                </a>
                <a class="tab-item" href="#">
                    <span class="icon icon-cart"></span>
                    <span class="tab-label">我的</span>
                </a>
            </nav>

        </div>
    </div>
{/block}

{block name="script"}
    <script>
        //初始化
        $.init()

        var service = new Vue({
            el: '#service', 
            data: {
                current: {$current},
                pet_current: 0,
                pet_icon: '',
                breeds: {},
                service: {$service},
            },
            methods: {
                changeProject: function($id){
                    this.current = $id;
                    this.pet_current = 0;
                },
                changePet: function($id){
                    this.pet_current = $id;
                    this.pet_icon = this.service[this.current].pets[this.pet_current].pet_icon;
                    this.breeds = this.service[this.current].pets[this.pet_current].breed;
                },
                choosebreed: function(){
                    if(JSON.stringify(this.breeds) == "{}"){
                        alert("请先选择宠物");
                        return false;
                    }
                    var inst = $('[data-remodal-id=modal]').remodal();
                    inst.open();
                    /*$('.pet-box').modal({onOpen: function (dialog) {
                        dialog.overlay.fadeIn('fast', function () {
                            dialog.container.slideDown('fast', function () {
                                dialog.data.fadeIn('fast');
                            });
                        });
                    }});*/
                },
            }
        })

        $(function(){
            // $.alert('请先选择宠物');
            /*$('.tel').click(function (e) {
                $('.cat-box').modal({onOpen: function (dialog) {
                    dialog.overlay.fadeIn('fast', function () {
                        dialog.container.slideDown('fast', function () {
                            dialog.data.fadeIn('fast');
                        });
                    });
                }});
                return false;
            });

            $('.addr').click(function (e) {
                $('.dog-box').modal({onOpen: function (dialog) {
                    dialog.overlay.fadeIn('fast', function () {
                        dialog.container.slideDown('fast', function () {
                            dialog.data.fadeIn('fast');
                        });
                    });
                }});
                return false;
            });*/

            /*$('.stars').click(function (e) {
                $('.add-addr').modal({onOpen: function (dialog) {
                    dialog.overlay.fadeIn('fast', function () {
                        dialog.container.slideDown('fast', function () {
                            dialog.data.fadeIn('fast');
                        });
                    });
                }});
                return false;
            });*/

            /*$("#city-picker").cityPicker({
                toolbarTemplate: '<header class="bar bar-nav">\
                <button class="button button-link pull-right close-picker">OK</button>\
                <h1 class="title">choose address</h1>\
                </header>'
            });*/
        })

        $(function(){
            //底部导航默认选中
            $(".bar-tab .tab-item").eq(1).trigger("click");
        })
    </script>
{/block}
